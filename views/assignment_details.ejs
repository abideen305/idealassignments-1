<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="author" content="Abideen Muhammed" />
    <meta
      name="description"
      content="Need Assignment Help with Upto 30% Off? Get Top Quality Assignment Help from idealassignmentshelp.com at student-friendly prices and 24/7 support guaranteed."
    />
    <meta
      name="keywords"
      content="Assignment Help, Students Assigments help, Online Assignment Help"
    />
    <title>
      Ideal Assignments Help | High Excellence Assignments Help and Solutions
    </title>
    <link rel="canonical" href="https://www.idealassignmentshelp.com/" />
    <link
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      rel="stylesheet"
      integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,700|Roboto:400,500,700"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <!-- Custom styles for this template -->
    <link rel="shortcut icon" href="images/logo bar.jpeg" type="image/x-icon" />
    <!-- Bootsrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css"
    />
    <script>
      addEventListener(
        "load",
        function () {
          setTimeout(hideURLbar, 0);
        },
        false
      );

      function hideURLbar() {
        window.scrollTo(0, 1);
      }
    </script>

    <!-- Custom Theme files -->
    <!-- <link href="css/bootstrap.css" type="text/css" rel="stylesheet" media="all"> -->
    <link href="css/submit.css" type="text/css" rel="stylesheet" media="all" />
    <!-- font-awesome icons -->
    <link href="css/font-awesome.min.css" rel="stylesheet" />
    <!-- //Custom Theme files -->
    <!-- online-fonts -->
    <link
      href="//fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i"
      rel="stylesheet"
    />
    <link
      href="//fonts.googleapis.com/css?family=Lato:100,100i,300,300i,400,400i,700,700i,900,900i"
      rel="stylesheet"
    />
  </head>

  <body>
    <header>
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarTogglerDemo01"
          aria-controls="navbarTogglerDemo01"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
          <a class="navbar-brand" href="/">
            <img src="/images/logo bar.jpeg" alt="Logo" style="width: 100px" />
          </a>
          <a class="navbar-brand" href="/">Ideal Assigments Help</a>
          <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item active">
              <a class="nav-link" href="/"
                >Home <span class="sr-only">(current)</span></a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/dashboard">Dashboard</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/transactions">Transactions</a>
            </li>
          </ul>
          <form class="form-inline my-2 my-lg-0">
            <input
              class="form-control mr-sm-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
          </form>
        </div>
      </nav>
    </header>
    <div class="row">
      <div class="col-md-8 mx-auto my-5">
        <h3>Assignment Details</h3>
  <% if(message!= '') { %>
  <p style="color: black"><%=message %></p>
  <% } %> 
        <div class="card mb-3">
          <div class="card-body">
            <div class="row">
              <div class="col-sm-3"><h6 class="mb-0">Title</h6></div>
              <div class="col-sm-9 text-secondary"><%=data.title%></div>
            </div>
            <hr />
            <div class="row">
              <div class="col-sm-3"><h6 class="mb-0">Subject</h6></div>
              <div class="col-sm-9 text-secondary"><%=data.subject%></div>
            </div>
            <hr />
            <div class="row">
              <div class="col-sm-3"><h6 class="mb-0">Deadline</h6></div>
              <div class="col-sm-9 text-secondary"><%=data.deadline%></div>
            </div>
            <hr />
            <div class="row">
              <div class="col-sm-3"><h6 class="mb-0">Status</h6></div>
              <div class="col-sm-9 text-secondary"><%=data.status%></div>
            </div>
            <hr />
            <div class="row" style="display:<%if( !user.isAdmin  ){ %> none <% } %>">
              <div class="col-md-3"><h6 class="mb-0">Amount to Pay</h6></div>
              <div class="col-md-4 text-secondary">
                <input id="amountToPay" name="amountToPay" value="<%=data.amountToPay%>"/></div>
            <div class="col-md-2">
              <button
              type="button"
              id="amountToPayBtn"
              class="btn btn-outline-success"
            >
              Save
            </button>
            </div>
          </div>

            <div class="row" style="display:<%if( user.isAdmin  ){ %> none <% } %>">
              <div class="col-sm-3"><h6 class="mb-0">Amount to Pay</h6></div>
              <div class="col-sm-9 text-secondary"><%=data.amountToPay%></div>
            </div>
            <hr />  <div class="row">
              <div class="col-sm-3"><h6 class="mb-0">Amount Paid</h6></div>
              <div class="col-sm-9 text-secondary"><%=data.amountPaid%></div>
            </div>
            <hr />
            <div class="row">
              <div class="col-sm-3"><h6 class="mb-0">File</h6></div>
              <div class="col-sm-9 text-secondary">
                <a href="<%= data.fileUrl %>">Download</a>
              </div>
            </div>
            <hr />
            <div class="row">
              <div class="col-sm-3"><h6 class="mb-0">Created At</h6></div>
              <div class="col-sm-9 text-secondary">
                <%= new Date(data.createdAt ).toISOString().slice(0, 10) %>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-5 mb-5 mx-auto">
        <a href="/assignment/<%= data._id %>/edit?status=cancelled" style="display:<%if( user.isAdmin ){ %> none <% } %>">
          <button
            type="button"
            class="btn btn-outline-danger"
            data-mdb-ripple-color="dark"
          >
            cancel
          </button>
        </a>
          <button
            type="button"
            id="payButton"
            class="btn btn-outline-primary"
            data-mdb-ripple-color="dark"
            style="display:<%if( user.isAdmin  ){ %> none <% } %>"
          >
            Pay
          </button>
        <span    style="display:<%if( !user.isAdmin  ){ %> none <% } %>">
          <a href="/assignment/<%= data._id %>/edit?status=rejected">
            <button
              type="button"
              class="btn btn-outline-danger"
              data-mdb-ripple-color="dark"
            >
              Reject
            </button>
          </a>
          <a href="/assignment/<%= data._id %>/edit?status=solved">
            <button
              type="button"
              class="btn btn-outline-success"
              data-mdb-ripple-color="dark"
            >
              solved
            </button>
          </a>
        </div>
        </div>
      </div>
    </div>
    <!-- Bootstrap core JavaScript -->
   
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <script src="https://js.paystack.co/v1/inline.js"></script> 


    <!-- Chat With us   -->
    <!--Start of Tawk.to Script-->
    <script type="text/javascript">
      var Tawk_API = Tawk_API || {},
        Tawk_LoadStart = new Date();
      (function () {
        var s1 = document.createElement("script"),
          s0 = document.getElementsByTagName("script")[0];
        s1.async = true;
        s1.src = "https://embed.tawk.to/60133048c31c9117cb739e7d/1et5f973t";
        s1.charset = "UTF-8";
        s1.setAttribute("crossorigin", "*");
        s0.parentNode.insertBefore(s1, s0);
      })();
    </script>
    <!--End of Tawk.to Script-->
    <script>
const payButton = document.getElementById('payButton');

payButton.addEventListener("click", payWithPaystack, false);

function payWithPaystack(e) {
  e.preventDefault();
  let handler = PaystackPop.setup({
    key: 'pk_test_066dea86e1a27008e1a216b91d179449785173fc', // Replace with your public key
    email:"<%=data.email%>",
    amount: Number("<%=data.amountToPay%>") * 100,
    ref: 'I_A' +"_" + Math.floor((Math.random() * 1000000000) + 1), 
    metadata: {
      assignmentId: "<%=data._id%>",
      customerEmail: "<%=data.email%>"
    },
    onClose: function(){
      // alert('Window closed.');
    },
    callback: function(response){
      window.location = "<%= appURL %>/verify_transaction/" + response.reference;
    }
  });
  handler.openIframe();
}
    </script>
    <script>

      const submitAmountToPay = async (e)=> {
        const amountToPayBtn =document.getElementById("amountToPayBtn")
      const amountToPayValue = document.getElementById("amountToPay").value
        e.preventDefault()
        await fetch(`/assignment/<%= data._id %>/edit/`, {
          method: "POST",
          headers: {
            'Content-Type': 'application/json'
          },
          credentials: 'include',
          body: JSON.stringify({
            amount: amountToPayValue
          })
        }).then(res=> res.json())
        .then((res => {
          if(res.success) {
            alert("Amount updated successfully")
          }
        }))
}
amountToPayBtn.addEventListener("click", submitAmountToPay, false);


    </script>
  </body>
</html>
